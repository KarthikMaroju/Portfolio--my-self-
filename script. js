// Sidebar
function toggleMenu(){
  let s=document.getElementById("sidebar");
  s.style.left=(s.style.left==="0px")?"-200px":"0px";
}

// Typing
const text=["Full Stack Developer","3D UI Engineer","Python Backend Developer"];
let i=0,j=0,current="",isDeleting=false;
function type(){
  current=text[i];
  document.querySelector(".typing").innerHTML=current.substring(0,j);
  if(!isDeleting && j<current.length) j++;
  else if(isDeleting && j>0) j--;
  else{
    isDeleting=!isDeleting;
    if(!isDeleting) i=(i+1)%text.length;
  }
  setTimeout(type,100);
}
type();

// AI Chat simple
function sendMessage(){
  let input=document.getElementById("userInput").value;
  let chat=document.getElementById("chat");
  chat.innerHTML+="<p>You: "+input+"</p>";
  chat.innerHTML+="<p>AI: Thanks for contacting Karthik!</p>";
}

// 3D Galaxy
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
const renderer=new THREE.WebGLRenderer({canvas:document.getElementById("bg")});
renderer.setSize(window.innerWidth,window.innerHeight);

const starsGeometry=new THREE.BufferGeometry();
const starVertices=[];
for(let i=0;i<5000;i++){
  starVertices.push((Math.random()-0.5)*2000);
}
starsGeometry.setAttribute('position',new THREE.Float32BufferAttribute(starVertices,3));
const starsMaterial=new THREE.PointsMaterial({color:0x00ffff});
const starField=new THREE.Points(starsGeometry,starsMaterial);
scene.add(starField);

camera.position.z=5;
function animate(){
  requestAnimationFrame(animate);
  starField.rotation.y+=0.0005;
  renderer.render(scene,camera);
}
animate();
